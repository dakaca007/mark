(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2cacbcae"],{"4ff8":function(e,a,t){},c9b6:function(e,a,t){"use strict";t("4ff8")},f6af:function(e,a,t){"use strict";t.r(a);t("d81d");var n=t("ca7f"),i=t("102f"),o=t("dc92"),r={name:"TakeManage",components:{TableList:n.a,DialogForm:i.a},data:function(){return{total:0,tableData:[],tableMap:[{label:"网站名称",key:"name"},{label:"网站链接",key:"url"},{label:"网站描述",key:"description"},{label:"网站图标",key:"icon"},{label:"备注",key:"remarks"},{label:"拓展字段",key:"expand"},{label:"权限码",key:"code"},{label:"是否可用",key:"enabled"}],searchForm:{name:"",code:""},searchFormMap:[{label:"名称",type:"input",key:"name"},{label:"权限码",key:"code",type:"select",selectOptions:this.CONSTANT.dictionary.code}],show:!1,mode:"add",formMap:[{label:"名称",key:"name",type:"input"},{label:"链接",key:"url",type:"input"},{label:"图标",key:"icon",type:"icon"},{label:"描述",key:"description",type:"input"},{label:"是否可用",key:"enabled",type:"switch"},{label:"权限码",key:"code",type:"select",selectOptions:this.CONSTANT.dictionary.code},{label:"备注",key:"remarks",type:"input"},{label:"拓展字段",key:"expand",type:"input"}],rule:{name:[{validator:Object(o.b)(["isNoEmpty::必填项","minLength:2::长度不能小于2","maxLength:20::长度不能大于20"]),trigger:"blur"}],url:[{validator:Object(o.b)(["isNoEmpty::必填项","isUrl::请输入正确的网址"]),trigger:"blur"}],expand:[{validator:Object(o.b)(["isJSONObject::请输入JSON对象"]),trigger:"blur"}]},form:{name:"",url:"",icon:"",description:"",remarks:"",expand:"{}",enabled:!0,code:0},pageNo:1,pageSize:10}},mounted:function(){this.queryData()},methods:{queryData:function(){var e=this,a=Object.assign({pageNo:this.pageNo,pageSize:this.pageSize},this.searchForm);this.API.findSiteByPage(a,{notify:!1}).then((function(a){e.tableData=a.data.list,e.total=a.data.total,e.cancel()}))},updatePagination:function(e,a){this.pageNo=e,this.pageSize=a},handleRemove:function(e,a){var t=this;this.API.removeSite({_id:a._id}).then((function(e){t.queryData()}))},handleRemoveMany:function(e){var a=this,t=e.map((function(e){return e._id}));this.API.removeManySite({_ids:t}).then((function(e){a.queryData()}))},handleAdd:function(){this.show=!0,this.mode="add"},handleAddMany:function(){var e=this;this.$prompt("网链","导入文本数据",{confirmButtonText:"导入",cancelButtonText:"取消",inputValidator:function(e){try{var a=JSON.parse(e);return!!Array.isArray(a)}catch(e){return!1}},inputErrorMessage:'数据格式：[{"name":"名称","url":"huasen.cc","description":"描述"}]'}).then((function(a){var t=a.value,n=JSON.parse(t);e.API.addManySite({sites:n}).then((function(a){e.queryData()}))})).catch((function(e){}))},handleEdit:function(e,a){var t=this;this.show=!0,this.mode="edit",this.$nextTick((function(){t.form=Object.assign(t.form,a)}))},paginationChange:function(){this.queryData()},save:function(){var e=this;"edit"===this.mode?this.API.updateSite(this.form).then((function(a){e.queryData()})):"add"===this.mode&&(delete this.form._id,delete this.form._v,this.API.addSite(this.form).then((function(a){e.queryData()})))},cancel:function(){this.$refs.dialogForm&&this.$refs.dialogForm.close(),this.show=!1}}},s=(t("c9b6"),t("2877")),d=Object(s.a)(r,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"site-manage"},[t("TableList",{attrs:{tableData:e.tableData,tableMap:e.tableMap,formData:e.searchForm,formMap:e.searchFormMap,total:e.total,showAdd:!0,showAddMany:!0,showSelection:!0},on:{"update:formData":function(a){e.searchForm=a},"update:form-data":function(a){e.searchForm=a},edit:e.handleEdit,add:e.handleAdd,addMany:e.handleAddMany,remove:e.handleRemove,removeMany:e.handleRemoveMany,search:e.queryData,paginationChange:e.paginationChange,updatePagination:e.updatePagination}}),e.show?t("DialogForm",{ref:"dialogForm",attrs:{width:"520",maxHeight:"480",title:"add"==e.mode?"添加网链":"编辑网链",visible:e.show,formMap:e.formMap,formData:e.form,formRule:e.rule,mode:e.mode,buttons:{comfirm:"确 认",cancel:"取 消"}},on:{"update:visible":function(a){e.show=a},"update:formData":function(a){e.form=a},"update:form-data":function(a){e.form=a},comfirmForm:e.save,cancelForm:e.cancel}}):e._e()],1)}),[],!1,null,"5f00d45c",null);a.default=d.exports}}]);