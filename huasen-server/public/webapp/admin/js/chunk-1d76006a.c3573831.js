(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d76006a"],{"102f":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("HsDialog",e._g(e._b({staticClass:"dialog-form",on:{comfirmDialog:e.comfirmDialog,closeDialog:e.closeDialog,close:e.close}},"HsDialog",e.$attrs,!1),e.$listeners),[a("el-form",{ref:"form",staticClass:"form-group",attrs:{model:e.formData,rules:e.formRule,"label-position":"top"}},e._l(e.formMap,(function(t,o){return a("el-form-item",{key:o,attrs:{label:t.label,prop:t.key}},["input"===t.type?a("el-input",{attrs:{disabled:e.handleDisabled(t)},model:{value:e.formData[t.key],callback:function(a){e.$set(e.formData,t.key,a)},expression:"formData[formTtem.key]"}}):e._e(),"select"===t.type?a("el-select",{attrs:{"popper-append-to-body":!1},model:{value:e.formData[t.key],callback:function(a){e.$set(e.formData,t.key,a)},expression:"formData[formTtem.key]"}},e._l(t.selectOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1):e._e(),"switch"===t.type?a("el-switch",{model:{value:e.formData[t.key],callback:function(a){e.$set(e.formData,t.key,a)},expression:"formData[formTtem.key]"}}):e._e(),"textarea"===t.type?a("el-input",{attrs:{type:"textarea"},model:{value:e.formData[t.key],callback:function(a){e.$set(e.formData,t.key,a)},expression:"formData[formTtem.key]"}}):e._e(),"icon"===t.type?a("div",[a("el-upload",{style:e.iconStyle,attrs:{headers:e.headers,action:e.action,"on-error":e.handleError,"on-success":e.handleSuccess,"show-file-list":!1,"list-type":"picture-card"}},[a("i",{staticClass:"el-icon-plus"})]),a("el-input",{staticClass:"mt-px-10",model:{value:e.formData[t.key],callback:function(a){e.$set(e.formData,t.key,a)},expression:"formData[formTtem.key]"}})],1):e._e()],1)})),1)],1)},n=[],r=a("8c8ad"),i={name:"DialogForm",components:{HsDialog:r["a"]},data:function(){return{}},props:{mode:{type:String,default:"add"},formData:{type:Object,default:function(){return{name:"杭州",area:"1"}}},formMap:{type:Array,default:function(){return[{label:"输入框示例",key:"name",type:"input"},{label:"下拉选择",key:"area",type:"select",selectOptions:[{label:"滨江区",value:1},{label:"萧山区",value:2}]}]}},formRule:{type:Object,default:function(){return{name:[{required:!0,message:"必填项",trigger:"blur"}]}}}},computed:{action:function(){return this.TOOL.getUploadApi("/manage/uploadIcon")},headers:function(){return{token:this.$store.state.manage.token}},iconStyle:function(){return{"--icon":"url(".concat(this.formData["icon"],")")}}},methods:{comfirmDialog:function(){var e=this;this.$refs.form.validate((function(t){t&&e.$emit("comfirmForm")}))},closeDialog:function(){this.$refs.form.resetFields(),this.$emit("cancelForm")},close:function(){this.$refs.form.resetFields()},handleDisabled:function(e){return"add"===this.mode?e.addDisabled:"edit"===this.mode?e.editDisabled:void 0},handleSuccess:function(e,t,a){0!==e.data.length?this.formData["icon"]=e.data[0].path:this.$tips("error","无图标链接丢失","top-right",1200)},handleError:function(){this.$tips("error","上传失败","top-right",1200)}}},l=i,s=(a("574d"),a("2877")),c=Object(s["a"])(l,o,n,!1,null,"800aa20e",null);t["a"]=c.exports},"1ad1":function(e,t,a){},"32b0":function(e,t,a){},"4c11":function(e,t,a){},"574d":function(e,t,a){"use strict";a("32b0")},"7fbd":function(e,t,a){"use strict";a("4c11")},af15:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-user"},[a("TableList",{attrs:{tableData:e.users,tableMap:e.tableMap,formData:e.searchForm,formMap:e.searchFormMap,showAdd:!0,total:e.total},on:{"update:formData":function(t){e.searchForm=t},"update:form-data":function(t){e.searchForm=t},edit:e.editUser,add:e.addUser,remove:e.removeUser,search:e.queryUser,paginationChange:e.paginationChange}}),a("DialogForm",{attrs:{width:"460",title:"添加用户",visible:e.show,mode:e.mode,buttons:{comfirm:"确 认",cancel:"取 消"},formMap:e.formMap,formData:e.form,formRule:e.rule},on:{"update:visible":function(t){e.show=t},"update:formData":function(t){e.form=t},"update:form-data":function(t){e.form=t},comfirmForm:e.save,cancelForm:e.cancel}})],1)},n=[],r=a("ca7f"),i=a("102f"),l=a("dc92"),s={name:"AccountUser",components:{TableList:r["a"],DialogForm:i["a"]},data:function(){return{users:[],tableMap:[{label:"账号",key:"id"},{label:"密码",key:"password"},{label:"权限码",key:"code"},{label:"昵称",key:"name"},{label:"头像",key:"headImg"},{label:"收录站点",key:"records"},{label:"配置",key:"config"},{label:"是否可用",key:"enabled"}],total:0,searchForm:{id:"",name:"",code:""},searchFormMap:[{label:"账号",type:"input",key:"id"},{label:"昵称",type:"input",key:"name"},{label:"权限码",key:"code",type:"select",selectOptions:this.CONSTANT.dictionary.code}],show:!1,mode:"add",formMap:[{label:"账号",key:"id",type:"input",editDisabled:!0},{label:"密码",key:"password",type:"input"},{label:"权限码",key:"code",type:"select",selectOptions:this.CONSTANT.dictionary.code},{label:"昵称",key:"name",type:"input"},{label:"是否可用",key:"enabled",type:"switch"},{label:"头像",key:"headImg",type:"input"},{label:"收录站点",key:"records",type:"input"},{label:"配置",key:"config",type:"input"}],rule:{id:[{validator:Object(l["a"])(["isNoEmpty::必填项","minLength:5::长度小于5","maxLength:20::长度大于20","isEmail::请输入邮箱"]),trigger:"blur"}],password:[{validator:Object(l["a"])(["isNoEmpty::必填项","minLength:5::长度小于5"]),trigger:"blur"}],name:[{validator:Object(l["a"])(["minLength:2::长度小于2","maxLength:20::长度大于20"]),trigger:"blur"}]},form:{id:"",password:"",code:0,name:"",headImg:"",records:"",config:"",enabled:!0}}},mounted:function(){this.queryUser()},methods:{queryUser:function(e,t){var a=this,o=Object.assign({pageNo:e,pageSize:t},this.searchForm);this.API.findUserByPage(o,{notify:!1}).then((function(e){a.users=e.data.list,a.total=e.data.total}))},removeUser:function(e,t,a,o){var n=this;this.API.removeUser({_id:t._id}).then((function(e){n.queryUser()}))},addUser:function(){this.show=!0,this.mode="add"},editUser:function(e,t){var a=this;this.show=!0,this.mode="edit",this.$nextTick((function(){a.form=Object.assign(a.form,t)}))},paginationChange:function(e,t){this.queryUser(e,t)},save:function(){var e=this;"edit"===this.mode?this.API.updateUser(this.form).then((function(t){e.queryUser(),e.show=!1})):"add"===this.mode&&(delete this.form._id,delete this.form._v,this.API.addUser(this.form).then((function(t){e.queryUser(),e.show=!1})))},cancel:function(){this.show=!1}}},c=s,u=(a("7fbd"),a("2877")),d=Object(u["a"])(c,o,n,!1,null,null,null);t["default"]=d.exports},c2ff:function(e,t,a){"use strict";a("1ad1")},ca7f:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-list"},[e.showHeader?a("header",[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.formData}},[a("el-row",{attrs:{gutter:10}},[e._l(e.formMap,(function(t,o){return a("el-col",{key:o,attrs:{span:t.span||6}},[a("el-form-item",["input"==t.type?a("el-input",{attrs:{placeholder:e.handlePlaceHolder(t)},model:{value:e.formData[t.key],callback:function(a){e.$set(e.formData,t.key,a)},expression:"formData[formItem.key]"}}):e._e(),"select"==t.type?a("el-select",{attrs:{placeholder:e.handlePlaceHolder(t)},model:{value:e.formData[t.key],callback:function(a){e.$set(e.formData,t.key,a)},expression:"formData[formItem.key]"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(t.selectOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2):e._e()],1)],1)})),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查 询")]),e.showAdd?a("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("添 加")]):e._e()],1)],1)],2)],1)],1):e._e(),e.showContent?a("main",[a("el-table",{attrs:{data:e.tableData,stripe:!0,border:!0,"highlight-current-row":"","max-height":"540"}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._l(e.tableMap,(function(t,o){return a("el-table-column",{key:o,attrs:{label:t.label,width:t.width,"show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(o){return[a("div",{staticClass:"text"},[e._v(e._s(e._f("emptyTip")(o.row[t.key])))])]}}],null,!0)})})),a("el-table-column",{attrs:{label:"操作",width:240},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showRemove?a("el-popconfirm",{staticClass:"mr-px-10",attrs:{"popper-class":"delete-popcomfirm",title:"确定删除吗？"},on:{confirm:function(a){return e.remove(t.$index,t.row)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删 除")])],1):e._e(),e.showOperate?a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return e.operate(t.$index,t.row)}}},[e._v("操 作")]):e._e(),e.showCopy?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.copy(t.$index,t.row)}}},[e._v("复 制")]):e._e(),e.showEdit?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.edit(t.$index,t.row)}}},[e._v("编 辑")]):e._e()]}}],null,!1,637046452)})],2)],1):e._e(),e.showContent?a("footer",[a("el-pagination",{staticClass:"flex mt-px-28",attrs:{"current-page":e.pageNo,background:"","page-sizes":[10,20,50,100],pageSize:e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"popper-class":"page-size-popper"},on:{"size-change":e.handlePageSizeChange,"current-change":e.handlePageNoChange}})],1):e._e()])},n=[],r=(a("a9e3"),{name:"TableList",props:{formData:{type:Object,default:function(){return{name:"huasen"}}},formMap:{type:Array,default:function(){return[{span:6,label:"姓名",type:"input",key:"name"}]}},tableMap:{type:Array,default:function(){return[{label:"日期",key:"data"}]}},tableData:{type:Array,default:function(){return[{date:"1979-01-01"}]}},total:{type:Number,default:0},showAdd:{type:Boolean,default:!1},showRemove:{type:Boolean,default:!0},showEdit:{type:Boolean,default:!0},showOperate:{type:Boolean,default:!1},showCopy:{type:Boolean,default:!1}},computed:{showContent:function(){return 0!==this.tableMap.length},showHeader:function(){return 0!==this.formMap.length}},data:function(){return{pageNo:1,pageSize:10}},methods:{handlePlaceHolder:function(e){return"请输入".concat(e.label)},handlePageSizeChange:function(e){this.$emit("paginationChange",this.pageNo,e)},handlePageNoChange:function(e){this.$emit("paginationChange",e,this.pageSize)},add:function(){this.$emit("add")},remove:function(e,t){this.$emit("remove",e,t,this.pageNo,this.pageSize)},edit:function(e,t){this.$emit("edit",e,t)},operate:function(e,t){this.$emit("operate",e,t)},copy:function(e,t){this.TOOL.copyTextToClip(JSON.stringify(t),"已复制到剪贴板")},search:function(){this.$emit("search",this.pageNo,this.pageSize)}}}),i=r,l=(a("c2ff"),a("2877")),s=Object(l["a"])(i,o,n,!1,null,"a2735920",null);t["a"]=s.exports}}]);