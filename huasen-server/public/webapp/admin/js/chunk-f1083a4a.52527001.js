(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f1083a4a"],{"16ca":function(t,e,n){"use strict";n("7dc3")},"7dc3":function(t,e,n){},a46f:function(t,e,n){t.exports=n.p+"img/1.df76218f.gif"},aaac:function(t,e,n){"use strict";n.r(e);var s=n("2909"),i=(n("4de4"),n("caad"),n("2532"),n("b0c0"),n("159b"),n("a434"),n("d81d"),n("b76a")),c=n.n(i),l={name:"ColumnSelector",components:{HsDrawer:n("1feb").a,Draggable:c.a},props:{currentJournal:{type:Object,default:function(){}}},data:function(){return{searchText:"",selectColumns:[],selectColumnIndex:[],columns:[],activeCollapseName:""}},computed:{displayColumns:function(){var t=this;return this.columns.filter((function(e){return e.name.includes(t.searchText)}))}},watch:{selectColumnIndex:function(){this.handleSelectSite()},columns:function(){this.handleSelectSite()},currentJournal:{handler:function(t,e){try{this.selectColumnIndex=Array.isArray(JSON.parse(t.columnStore))?Object(s.a)(JSON.parse(t.columnStore)):[]}catch(t){this.selectColumnIndex=[]}},deep:!0,immediate:!0}},mounted:function(){this.queryColumn()},methods:{queryColumn:function(){var t=this;this.API.findColumnByList({},{notify:!1}).then((function(e){t.columns=e.data}))},handleSelectSite:function(){var t=this,e=[];this.selectColumnIndex.forEach((function(n){t.columns.some((function(t){if(t._id===n)return e.push(t),!0}))})),this.selectColumns=e},getSelectStatus:function(t){return this.selectColumnIndex.includes(t._id)},imgUrl:function(t){return t.icon?t.icon:n("a46f")},selectSite:function(t){var e=t._id,n=this.selectColumnIndex.indexOf(e);-1===n?this.selectColumnIndex.push(e):this.selectColumnIndex.splice(n,1)},save:function(){var t=this,e=this.selectColumns.map((function(t){return t._id}));this.API.updateJournal({_id:this.currentJournal._id,columnStore:JSON.stringify(e)}).then((function(e){t.$emit("save")}))},cancel:function(){this.$emit("cancel"),this.$emit("update:visible",!1)},remove:function(t,e){var n=this.selectColumnIndex.indexOf(t._id);-1!==n&&this.selectColumnIndex.splice(n,1)}}},a=(n("16ca"),n("2877")),o=Object(a.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("HsDrawer",t._g(t._b({},"HsDrawer",t.$attrs,!1),t.$listeners),[n("div",{staticClass:"column-selector"},[n("div",{staticClass:"column-selector-main"},[n("div",{staticClass:"selected"},[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[t._v("已选择")])]),n("ul",{staticClass:"column-list"},[n("Draggable",{attrs:{filter:".no-drap",animation:"400"},model:{value:t.selectColumns,callback:function(e){t.selectColumns=e},expression:"selectColumns"}},[n("transition-group",t._l(t.selectColumns,(function(e,s){return n("li",{key:e._id,staticClass:"column-item drag-item"},[n("i",{staticClass:"el-icon-rank pointer"}),n("div",{staticClass:"name text no-drap"},[t._v(t._s(t._f("emptyTip")(e.name)))]),n("div",{staticClass:"description text no-drap"},[t._v(t._s(t._f("emptyTip")(e.description)))]),n("i",{staticClass:"el-icon-delete pointer remove no-drap",on:{click:function(n){return t.remove(e,s)}}})])})),0)],1)],1)]),n("div",{staticClass:"selecting"},[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[t._v("待选择")]),n("el-input",{attrs:{placeholder:"请输入网址名称","suffix-icon":"el-icon-search"},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),n("ul",{staticClass:"column-group"},t._l(t.displayColumns,(function(e){return n("li",{key:e._id,staticClass:"column",on:{click:function(n){return t.selectSite(e)}}},[n("div",{staticClass:"name text",attrs:{title:e.name}},[t._v(t._s(t._f("emptyTip")(e.name)))]),t.getSelectStatus(e)?n("i",{staticClass:"el-icon-success"}):t._e()])})),0)])]),n("div",{staticClass:"column-selector-footer"},[n("el-button",{attrs:{type:"primary",plain:""},on:{click:t.save}},[t._v("确定配置")]),n("el-button",{attrs:{type:"warning",plain:""},on:{click:t.cancel}},[t._v("取消修改")])],1)])])}),[],!1,null,"f731601a",null);e.default=o.exports}}]);